version: 2

models:
  - name: dim_customers
    description: >
      Customer dimension table providing one row per customer with
      derived lifetime and engagement metrics based on order history.

    columns:
      - name: customer_id
        description: "Unique identifier for a customer"
        tests:
          - not_null
          - unique

      - name: country
        description: "Country associated with the customer"

      - name: total_orders
        description: "Total number of orders placed by the customer"

      - name: first_order_date
        description: "Date of the customer's first recorded order"

      - name: last_order_date
        description: "Date of the customer's most recent order"

      - name: lifetime_value
        description: "Total revenue generated by the customer across all orders"
  - name: fct_orders
    description: >
      Order fact table at order grain. This model represents the canonical
      transactional record for revenue and order-level analytics and is the
      source for derived metrics such as Average Order Value (AOV).

    columns:
      - name: order_id
        description: "Unique identifier for an order"
        tests:
          - not_null
          - unique

      - name: customer_id
        description: "Customer who placed the order"
        tests:
          - not_null
          - relationships:
              arguments:
                to: ref('dim_customers')
                field: customer_id

      - name: order_date
        description: "Date on which the order was placed"
        tests:
          - not_null

      - name: total_amount
        description: "Total monetary value of the order"
        tests:
          - not_null

      - name: total_items
        description: "Total quantity of items included in the order"

